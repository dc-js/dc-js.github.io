---
layout: example
title: Pie Chart with External Labels
---

<div class="row justify-content-center">
  <div class="col-12 max-width-800">
    <div id="test" class="ratio ratio-4x3"></div>
  </div>
</div>

<script type="text/javascript">
  const chartGroup = new dc.ChartGroup();
  const chart = new dc.PieChart('#test', chartGroup);
  d3.csv('morley.csv').then(experiments => {
    const ndx = crossfilter(experiments),
      runDimension = ndx.dimension(d => `run-${d.Run}`),
      speedSumGroup = runDimension.group().reduceSum(d => d.Speed * d.Run);

    chart
      .dataProvider(
        new dc.CFDataCapHelper({
          cap: 4,
          dimension: runDimension,
          group: speedSumGroup,
        })
      )
      .configure({
        // dynamically adjust the inner radius, works better with responsive charts
        beforeResize: rect => {
          const radius = d3.min([rect.width, rect.height]) / 2;
          const innerRadius = radius * 0.3;
          chart.configure({ innerRadius });
        },
        externalLabels: 50,
        externalRadiusPadding: 50,
        drawPaths: true,
      })
      .legend(new dc.Legend());

    chart.render();
  });
</script>
